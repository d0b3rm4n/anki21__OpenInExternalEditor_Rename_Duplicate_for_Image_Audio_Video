This add-on handles images, sound files, and videos: You can open them in an external program: e.g. you can open images in paint or "paint .NET" and edit them, add some text or arrows, crop them, etc. You can also duplicate the files. You can also rename them to e.g. later find them better when you are searching. This add-on adds context menu entries when you rightclick on an image (left screenshot below) or for audio/video when you have selected the whole "[sound:...]" text (middle screenshot below).
<img src="https://raw.githubusercontent.com/ijgnd/anki21__OpenInExternalEditor_Rename_Duplicate_for_Image_Audio_Video/master/screenshots/screenshot_merge.png">
This add-on mainly works in the editor (AddCards Dialog, bottom of the browser). During reviews you'll have fewer context menu entries.
Use this at your own risk.

<b># Details</b>
- edit the file in an external application. If you edit an image and don't use a Mac the editor is reloaded by default so that your changes are shown.
- duplicate the file. A copy will be put into the media folder and it will be inserted right after the current file in the editor. By default a number is appended ("_1","_2"). If shift is pressed when you click duplicate in the context menu you can select the new file name. This function might be more useful if you also use the add-on <a href="https://ankiweb.net/shared/info/1566928056" rel="nofollow">Copy notes</a> (in the browser) or <a href="https://ankiweb.net/shared/info/516643804" rel="nofollow">Frozen Fields</a> or <a href="https://ankiweb.net/shared/info/1247884413" rel="nofollow">Field History</a> (in the add window).
- rename the file. By default this is disabled because this is experimental. If you use this make sure to have backups and know how to restore them.
- show in file manager. By default this is disabled.
- edit an empty file and edit it. I use this as an alternative for <a href="https://ankiweb.net/shared/info/370778248" rel="nofollow">DrawingPad</a> on machines where I don't have Java or when I need extended drawing options (see the right screenshot above)

<b># Limitations</b>
- if the rename function does not work edited notes would be permanently damaged so that you would have to manually reinsert the images. That could be time consuming. The rename function has been included in the add-on for about a year and ankiweb shows me that it has been downloaded several hundred times. So far I haven't got a complaint. This could mean that it works or maybe it doesn't and it's just that no one is using the rename function so far.
- If you set the option "block_Anki" to "true" you might see unexpected behavior, see the section Configuration below.
- I don't have a Mac so I can't test what works on a Mac. In 2020-04 yhlai-code added some code for Mac, so some parts should work on Macs.

<b># Configuration</b>
Most of the options names should be self-explanatory. 
- You must adjust the programs you use. The options with <code>external_program</code> refer to a program name. Depending on your system it might be enough to use a short command like <code>mspaint</code> (on Windows) or <code>pinta</code> (on linux). Sometimes you need the exact location. This depends on what you have in your PATH environment variable. In Windows if you use the exact location you need to to replace a single backslash (<code>\</code>) by double <code>\\</code>. This is a limitation of the underlying tools that Anki uses. e.g. if you want to use <code>C:\Program Files\paint.​net\PaintDotNet.​exe</code> you must put <code>C:\\Program Files\\paint.​net\\PaintDotNet.​exe</code> into the config.
- <code>image_edit_externally__block_Anki_during_edit</code> has no effect on Mac since I don't have a Mac to test. If "true" you can't use Anki as long as the image processing software is used. This way Anki knows when you close the image processing software. Then Anki reloads the editor so that you immediatly see the changes. If you use this setting and you move the editor window the Anki window might look broken on some systems until you close the image editor. 

<b># Problems, Bugs, Errors, Improvements</b>
If you find a bug let me know in the <a href="https://forums.ankiweb.net/t/open-in-external-editor-rename-duplicate-for-image-audio-video-official-thread/555" rel="nofollow">official anki support forum</a>, on <a href="https://github.com/ijgnd/anki21__OpenInExternalEditor_Rename_Duplicate_for_Image_Audio_Video" rel="nofollow">github</a>.

<b># Versions</b>:
- 2020-08-06 keep the same card when reloading in the reviewer (made by phu54321)
- 2020-07-21 better rename tooltip
- 2020-07-20 fix opening file managers on linux when using the binary from ankiweb. I remove some environment variables that anki set which directed to the anki binary path (e.g. LD_LIBRARY_PATH).
- 2020-07-14 add context menu option to copy image/sound path to clipboard (true by default)
- 2020-06-30 rename context menu entries (so that they are grouped together), add option to show in fileexplorer to reviewer contextmenu
- 2020-04-04 MacOS: show file in finder by <a href="https://github.com/ijgnd/anki21__OpenInExternalEditor_Rename_Duplicate_for_Image_Audio_Video/pull/2" rel="nofollow">2020 Y. H. Lai (yhlai-code)</a>
- 2019-12-09
- 2019-05-16
- 2019-04-10
- 2019-04-07 initial release

<b># Other Authors</b>: 
- Ankitects Pty Ltd and contributors
- 2016 mkpoli (<a href="https://ankiweb.net/shared/info/1828964467" rel="nofollow">Audio Renamer</a>)
- 2016 Stevie Poppe (<a href="https://ankiweb.net/shared/info/1328067109" rel="nofollow">Remove Missing Audio References</a>
- 2018 ChrisK91 (<a href="https://ankiweb.net/shared/info/771313609" rel="nofollow">Edit Images Externally, Updated (Windows)</a>)
- 2016-18 glutanimate, ("Image Occlusion Enhanced", <a href="https://github.com/glutanimate/image-occlusion-enhanced/" rel="nofollow">https://github.com/glutanimate/image-occlusion-enhanced/</a>)
- 2016 Dimitry Mikheev ("Edit Audio Images", <a href="https://ankiweb.net/shared/info/1075177705" rel="nofollow">https://ankiweb.net/shared/info/1075177705</a> and <a href="https://ankiweb.net/shared/info/1040866511" rel="nofollow">https://ankiweb.net/shared/info/1040866511</a>)
- 2016 anonymous (<a href="https://ankiweb.net/shared/info/1829440730" rel="nofollow">Edit Images Externally (Mac OSx)</a>)
- <a href="https://github.com/ijgnd/anki21__OpenInExternalEditor_Rename_Duplicate_for_Image_Audio_Video/pull/2" rel="nofollow">2020 Y. H. Lai (yhlai-code)</a>
- <a href="https://github.com/phu54321" rel="nofollow">2020 phu54321/Hyun Woo Park</a>
